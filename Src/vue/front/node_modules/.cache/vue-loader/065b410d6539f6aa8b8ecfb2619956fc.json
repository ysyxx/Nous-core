{"remainingRequest":"D:\\code\\nous-core\\Src\\vue\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\code\\nous-core\\Src\\vue\\front\\src\\pages\\kechengxinxi\\detail.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\code\\nous-core\\Src\\vue\\front\\src\\pages\\kechengxinxi\\detail.vue","mtime":1750823378341},{"path":"D:\\code\\nous-core\\Src\\vue\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\code\\nous-core\\Src\\vue\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\code\\nous-core\\Src\\vue\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\code\\nous-core\\Src\\vue\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBWdWUgfSBmcm9tICd2dWUnOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIHRhYmxlbmFtZTogJ2tlY2hlbmd4aW54aScsDQogICAgICAgICAgICBiYXNlVXJsOiB0aGlzLiRjb25maWcgPyB0aGlzLiRjb25maWcuYmFzZVVybCA6ICdodHRwOi8vbG9jYWxob3N0OjgwODAvc3ByaW5nYm9vdG4zb3AybDIwLycsIC8vIEVuc3VyZSB0aGlzIG1hdGNoZXMgeW91ciBiYWNrZW5kIFVSTA0KICAgICAgICAgICAgZGV0YWlsOiB7fSwNCiAgICAgICAgICAgIGRldGFpbEJhbm5lcjogW10sDQogICAgICAgICAgICBpc1N0b3JldXA6IGZhbHNlLA0KICAgICAgICAgICAgaXNDcmF6aWx5bnVtOiBmYWxzZSwNCiAgICAgICAgICAgIGlzVGh1bWJzdXBudW06IGZhbHNlLA0KICAgICAgICAgICAgc3RvcmV1cFBhcmFtczoge30sDQogICAgICAgICAgICB0aHVtYnN1cE9yQ3JhemlseUluZm86IHt9LA0KICAgICAgICAgICAgaWQ6ICcnLCAvLyBDb3Vyc2UgSUQgKGZyb20gcm91dGUgcXVlcnkpDQoNCiAgICAgICAgICAgIGNvdXJzZVZpZGVvczogW10sIC8vIFN0b3JlcyBsaXN0IG9mIHZpZGVvIGNoYXB0ZXJzIGZyb20gY291cnNldmlkZW9zIHRhYmxlDQogICAgICAgICAgICBjdXJyZW50U2Vzc2lvbklkOiBudWxsLCAvLyBJRCBvZiB0aGUgY3VycmVudGx5IHBsYXlpbmcgdmlkZW8gY2hhcHRlcg0KICAgICAgICAgICAgY3VycmVudFZpZGVvVXJsOiAnJywgLy8gVVJMIG9mIHRoZSBjdXJyZW50bHkgcGxheWluZyB2aWRlbyBjaGFwdGVyDQogICAgICAgICAgICBjdXJyZW50VmlkZW9UaXRsZTogJycsIC8vIFRpdGxlIG9mIHRoZSBjdXJyZW50bHkgcGxheWluZyB2aWRlbyBjaGFwdGVyDQogICAgICAgICAgICB1c2VySWQ6IG51bGwsIC8vIEN1cnJlbnQgdXNlciBJRCAoZmV0Y2hlZCBmcm9tIGJhY2tlbmQpDQoNCiAgICAgICAgICAgIGNvbnRlbnRwZGZ1cmw6ICcnLA0KICAgICAgICB9Ow0KICAgIH0sDQogICAgYXN5bmMgY3JlYXRlZCgpIHsNCiAgICAgICAgdGhpcy5pZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkOw0KICAgICAgICBjb25zb2xlLmxvZygi6I635Y+W5Yiw55qE6K++56iLSUQ6IiwgdGhpcy5pZCk7DQogICAgICAgIHRoaXMuZ2V0RGV0YWlsKCkNCiAgICAgICAgLy8gRmV0Y2ggVXNlciBJRCBmaXJzdA0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgY29uc3QgdXNlclJlcyA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KCd5b25naHUvY3VycmVudFVzZXJJZCcpOyAvLyBBZGp1c3QgVVJMIGJhc2VkIG9uIHlvdXIgdXNlciBjb250cm9sbGVyIHBhdGgNCiAgICAgICAgICAgIGlmICh1c2VyUmVzLmRhdGEgJiYgdXNlclJlcy5kYXRhLmNvZGUgPT09IDApIHsNCiAgICAgICAgICAgICAgICB0aGlzLnVzZXJJZCA9IHVzZXJSZXMuZGF0YS51c2VySWQ7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIuS7juWQjuerr+iOt+WPluWIsOeahOeUqOaIt0lEOiIsIHRoaXMudXNlcklkKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCLojrflj5bnlKjmiLdJROWksei0pToiLCB1c2VyUmVzLmRhdGEubXNnIHx8ICfnlKjmiLfmnKrnmbvlvZXmiJbkvJror53ov4fmnJ8nKTsNCiAgICAgICAgICAgICAgICAvLyBPcHRpb25hbGx5IHJlZGlyZWN0IHRvIGxvZ2luIG9yIHNob3cgYSBtZXNzYWdlDQogICAgICAgICAgICB9DQogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgICAgICBjb25zb2xlLmVycm9yKCLor7fmsYLnlKjmiLdJROaOpeWPo+WHuumUmToiLCBlcnJvcik7DQogICAgICAgIH0NCg0KICAgICAgICB0aGlzLmluaXQoKTsNCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgYXN5bmMgaW5pdCgpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgbGV0IHJlcyA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KGAke3RoaXMudGFibGVuYW1lfS9kZXRhaWwvJHt0aGlzLmlkfWApOw0KICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YSAmJiByZXMuZGF0YS5jb2RlID09PSAwICYmIHJlcy5kYXRhLmRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXRhaWwgPSByZXMuZGF0YS5kYXRhOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmRldGFpbEJhbm5lciA9IHRoaXMuZGV0YWlsLmtlY2hlbmd0dXBpYW4gPyB0aGlzLmRldGFpbC5rZWNoZW5ndHVwaWFuLnNwbGl0KCcsJykgOiBbXTsNCg0KICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmdldENvdXJzZVZpZGVvcygpOw0KDQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvdXJzZVZpZGVvcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgbGFzdFZpZXdlZFZpZGVvSWQgPSBhd2FpdCB0aGlzLmZpbmRMYXN0Vmlld2VkVmlkZW9JZCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3RWaWV3ZWRWaWRlb0lkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5U2VsZWN0ZWRWaWRlbyhsYXN0Vmlld2VkVmlkZW9JZCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxheVNlbGVjdGVkVmlkZW8odGhpcy5jb3Vyc2VWaWRlb3NbMF0uaWQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZGV0YWlsLmtlY2hlbmdzaGlwaW4pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFNlc3Npb25JZCA9IHRoaXMuaWQ7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRWaWRlb1VybCA9IHRoaXMuZGV0YWlsLmtlY2hlbmdzaGlwaW47DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRWaWRlb1RpdGxlID0gdGhpcy5kZXRhaWwua2VjaGVuZ21pbmdjaGVuZzsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJlc3RvcmVQcm9ncmVzcyh0aGlzLmN1cnJlbnRTZXNzaW9uSWQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLiRyZWZzLnZpZGVvUGxheWVyICYmIHRoaXMuJHJlZnMudmlkZW9QbGF5ZXIucGF1c2VkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMudmlkZW9QbGF5ZXIucGxheSgpLmNhdGNoKGUgPT4gY29uc29sZS53YXJuKCLop4bpopHmkq3mlL7lpLHotKXmiJbnlKjmiLfmnKrkuqTkupI6IiwgZSkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gNC4gRmV0Y2ggc3RvcmV1cCBhbmQgdGh1bWJzdXAgc3RhdHVzIGlmIHVzZXIgaXMgbG9nZ2VkIGluDQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVzZXJJZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRTdG9yZXVwU3RhdHVzKCk7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFRodW1ic3VwT3JDcmF6aWx5U3RhdHVzKCk7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIuiOt+WPluivvueoi+ivpuaDheWksei0pToiLCByZXMuZGF0YS5tc2cgfHwgJ+acquefpemUmeivrycpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigi6K+35rGC6K++56iL6K+m5oOF5o6l5Y+j5Ye66ZSZOiIsIGVycm9yKTsNCiAgICAgICAgICAgIH0NCg0KDQogICAgICAgIH0sDQoNCiAgICAgICAgYXN5bmMgZ2V0Q291cnNlVmlkZW9zKCkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCB2aWRlb3NSZXMgPSBhd2FpdCB0aGlzLiRodHRwLmdldCgnY291cnNldmlkZW9zL2xpc3RCeUNvdXJzZUlkJywgeyBwYXJhbXM6IHsgY291cnNlSWQ6IHRoaXMuaWQgfSB9KTsNCiAgICAgICAgICAgICAgICBpZiAodmlkZW9zUmVzLmRhdGEgJiYgdmlkZW9zUmVzLmRhdGEuY29kZSA9PT0gMCAmJiB2aWRlb3NSZXMuZGF0YS5kYXRhKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuY291cnNlVmlkZW9zID0gdmlkZW9zUmVzLmRhdGEuZGF0YTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oIuiOt+WPluivvueoi+inhumikeeroOiKguWksei0pToiLCB2aWRlb3NSZXMuZGF0YS5tc2cgfHwgIuacquefpemUmeivryIpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNvdXJzZVZpZGVvcyA9IFtdOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigi6K+35rGC6K++56iL6KeG6aKR5YiX6KGo5o6l5Y+j5Ye66ZSZOiIsIGVycm9yKTsNCiAgICAgICAgICAgICAgICB0aGlzLmNvdXJzZVZpZGVvcyA9IFtdOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KDQogICAgICAgIGFzeW5jIGZpbmRMYXN0Vmlld2VkVmlkZW9JZCgpIHsNCiAgICAgICAgICAgIGlmICghdGhpcy51c2VySWQgfHwgdGhpcy5jb3Vyc2VWaWRlb3MubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDsNCg0KICAgICAgICAgICAgLy8gSXRlcmF0ZSB0aHJvdWdoIHZpZGVvcyB0byBmaW5kIGlmIGFueSBoYXMgc2F2ZWQgcHJvZ3Jlc3MNCiAgICAgICAgICAgIGZvciAoY29uc3QgdmlkZW8gb2YgdGhpcy5jb3Vyc2VWaWRlb3MpIHsNCiAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9ncmVzc1JlcyA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KCdjb3Vyc2Vwcm9ncmVzcy9nZXRPbmUnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3Vyc2VJZDogdGhpcy5pZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRlb0lkOiB2aWRlby5pZA0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzUmVzLmRhdGEgJiYgcHJvZ3Jlc3NSZXMuZGF0YS5jb2RlID09PSAwICYmIHByb2dyZXNzUmVzLmRhdGEuZGF0YSAmJiBwcm9ncmVzc1Jlcy5kYXRhLmRhdGEucHJvZ3Jlc3NTZWNvbmRzID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZpZGVvLmlkOyAvLyBSZXR1cm4gdGhlIElEIG9mIHRoZSBmaXJzdCB2aWRlbyB3aXRoIHByb2dyZXNzDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGDmo4Dmn6Xop4bpopEgJHt2aWRlby5pZH0g6L+b5bqm5pe25Ye66ZSZOmAsIGVycm9yKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gbnVsbDsgLy8gTm8gdmlkZW8gd2l0aCBzYXZlZCBwcm9ncmVzcyBmb3VuZA0KICAgICAgICB9LA0KDQogICAgICAgIC8vIFBsYXkgc2VsZWN0ZWQgdmlkZW8gKGZvciBtdWx0aS1jaGFwdGVyIGNvdXJzZXMpDQogICAgICAgIHBsYXlTZWxlY3RlZFZpZGVvKHZpZGVvSWQpIHsNCiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkVmlkZW8gPSB0aGlzLmNvdXJzZVZpZGVvcy5maW5kKHZpZGVvID0+IHZpZGVvLmlkID09PSB2aWRlb0lkKTsNCiAgICAgICAgICAgIGlmIChzZWxlY3RlZFZpZGVvKSB7DQogICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2Vzc2lvbklkID0gc2VsZWN0ZWRWaWRlby5pZDsNCiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRWaWRlb1VybCA9IHNlbGVjdGVkVmlkZW8udmlkZW9Vcmw7DQogICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50VmlkZW9UaXRsZSA9IGAke3NlbGVjdGVkVmlkZW8uY291cnNlU2Vzc2lvbiB8fCAnJ30gLSAke3NlbGVjdGVkVmlkZW8udGl0bGUgfHwgJ+aXoOagh+mimCd9YDsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg5q2j5Zyo5pKt5pS+6KeG6aKROiAke3RoaXMuY3VycmVudFZpZGVvVXJsfWApOw0KICAgICAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZXN0b3JlUHJvZ3Jlc3ModGhpcy5jdXJyZW50U2Vzc2lvbklkKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuJHJlZnMudmlkZW9QbGF5ZXIgJiYgdGhpcy4kcmVmcy52aWRlb1BsYXllci5wYXVzZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMudmlkZW9QbGF5ZXIucGxheSgpLmNhdGNoKGUgPT4gY29uc29sZS53YXJuKCLop4bpopHmkq3mlL7lpLHotKXmiJbnlKjmiLfmnKrkuqTkupIiLCBlKSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCg0KICAgICAgICBnZXRGaWxlTmFtZUZyb21VcmwodXJsKSB7DQogICAgICAgICAgICBpZiAoIXVybCkgcmV0dXJuICcnOw0KICAgICAgICAgICAgY29uc3QgcGFydHMgPSB1cmwuc3BsaXQoJy8nKTsNCiAgICAgICAgICAgIHJldHVybiBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXTsNCiAgICAgICAgfSwNCg0KICAgICAgICBkb3dubG9hZERvY3VtZW50KCkgew0KICAgICAgICAgICAgY29uc3QgcGRmVXJsID0gdGhpcy5kZXRhaWwuY29udGVudHBkZnVybDsNCiAgICAgICAgICAgIGlmIChwZGZVcmwpIHsNCiAgICAgICAgICAgICAgICBjb25zdCBkb2N1bWVudEZpbGVOYW1lID0gdGhpcy5nZXRGaWxlTmFtZUZyb21VcmwocGRmVXJsKTsNCiAgICAgICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOw0KICAgICAgICAgICAgICAgIGxpbmsuaHJlZiA9IHBkZlVybDsNCg0KICAgICAgICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCdkb3dubG9hZCcsIGRvY3VtZW50RmlsZU5hbWUpOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7DQogICAgICAgICAgICAgICAgbGluay5jbGljaygpOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluayk7DQoNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg5q2j5Zyo5LiL6L295paH5qGjOiAke2RvY3VtZW50RmlsZU5hbWV9YCk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn5rKh5pyJ5Y+v5LiL6L2955qE5paH5qGj44CCJyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQoNCiAgICAgICAgLy8gVmlkZW8gcGxheWJhY2sgZXZlbnRzDQogICAgICAgIG9uVGltZVVwZGF0ZSgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLnVzZXJJZCAmJiB0aGlzLmN1cnJlbnRTZXNzaW9uSWQgJiYgdGhpcy4kcmVmcy52aWRlb1BsYXllcikgew0KICAgICAgICAgICAgICAgIC8vIFNhdmUgcHJvZ3Jlc3MgZXZlcnkgNSBzZWNvbmRzIChvciBhZGp1c3QgZnJlcXVlbmN5KQ0KICAgICAgICAgICAgICAgIGlmIChNYXRoLmZsb29yKHRoaXMuJHJlZnMudmlkZW9QbGF5ZXIuY3VycmVudFRpbWUpICUgNSA9PT0gMCAmJiBNYXRoLmZsb29yKHRoaXMuJHJlZnMudmlkZW9QbGF5ZXIuY3VycmVudFRpbWUpICE9PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2F2ZVByb2dyZXNzKHRoaXMuY3VycmVudFNlc3Npb25JZCwgdGhpcy4kcmVmcy52aWRlb1BsYXllci5jdXJyZW50VGltZSwgdGhpcy4kcmVmcy52aWRlb1BsYXllci5kdXJhdGlvbik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBvblZpZGVvRW5kZWQoKSB7DQogICAgICAgICAgICBpZiAodGhpcy51c2VySWQgJiYgdGhpcy5jdXJyZW50U2Vzc2lvbklkICYmIHRoaXMuJHJlZnMudmlkZW9QbGF5ZXIpIHsNCiAgICAgICAgICAgICAgICAvLyBTYXZlIHByb2dyZXNzIGF0IDAgKG9yIHRvdGFsIGR1cmF0aW9uKSB3aGVuIHZpZGVvIGVuZHMNCiAgICAgICAgICAgICAgICB0aGlzLnNhdmVQcm9ncmVzcyh0aGlzLmN1cnJlbnRTZXNzaW9uSWQsIHRoaXMuJHJlZnMudmlkZW9QbGF5ZXIuZHVyYXRpb24gfHwgMCwgdGhpcy4kcmVmcy52aWRlb1BsYXllci5kdXJhdGlvbik7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQoNCiAgICAgICAgLy8gU2F2ZSB2aWRlbyBwbGF5YmFjayBwcm9ncmVzcyB0byBiYWNrZW5kDQogICAgICAgIGFzeW5jIHNhdmVQcm9ncmVzcyh2aWRlb0lkLCBjdXJyZW50VGltZSwgdG90YWxEdXJhdGlvbikgew0KICAgICAgICAgICAgaWYgKCF0aGlzLnVzZXJJZCB8fCAhdmlkZW9JZCB8fCAhdGhpcy4kcmVmcy52aWRlb1BsYXllcikgew0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3QgcHJvZ3Jlc3NEYXRhID0gew0KICAgICAgICAgICAgICAgIHVzZXJJZDogdGhpcy51c2VySWQsDQogICAgICAgICAgICAgICAgY291cnNlSWQ6IE51bWJlcih0aGlzLmlkKSwgLy8gRW5zdXJlIGl0J3MgTnVtYmVyIHR5cGUNCiAgICAgICAgICAgICAgICB2aWRlb0lkOiBOdW1iZXIodmlkZW9JZCksIC8vIFVzZSB0aGUgYWN0dWFsIHZpZGVvIElEIGZvciB0cmFja2luZw0KICAgICAgICAgICAgICAgIHByb2dyZXNzU2Vjb25kczogY3VycmVudFRpbWUsDQogICAgICAgICAgICAgICAgdG90YWxTZWNvbmRzOiB0b3RhbER1cmF0aW9uIC8vIENhbiBzZW5kIHRvdGFsIGR1cmF0aW9uIGlmIHlvdSB3YW50IHRvIHN0b3JlIGl0DQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgnY291cnNlcHJvZ3Jlc3Mvc2F2ZU9yVXBkYXRlJywgcHJvZ3Jlc3NEYXRhKTsNCiAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygi5a2m5Lmg6L+b5bqm5bey5L+d5a2YOiIsIGN1cnJlbnRUaW1lKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCLkv53lrZjlrabkuaDov5vluqblpLHotKU6IiwgcmVzLmRhdGEubXNnKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIuivt+axguS/neWtmOi/m+W6puaOpeWPo+WHuumUmToiLCBlcnJvcik7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQoNCiAgICAgICAgLy8gUmVzdG9yZSB2aWRlbyBwbGF5YmFjayBwcm9ncmVzcyBmcm9tIGJhY2tlbmQNCiAgICAgICAgYXN5bmMgcmVzdG9yZVByb2dyZXNzKHZpZGVvSWQpIHsNCiAgICAgICAgICAgIGlmICghdGhpcy51c2VySWQgfHwgIXZpZGVvSWQgfHwgIXRoaXMuJHJlZnMudmlkZW9QbGF5ZXIpIHsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KCdjb3Vyc2Vwcm9ncmVzcy9nZXRPbmUnLCB7DQogICAgICAgICAgICAgICAgICAgIHBhcmFtczogew0KICAgICAgICAgICAgICAgICAgICAgICAgY291cnNlSWQ6IHRoaXMuaWQsDQogICAgICAgICAgICAgICAgICAgICAgICB2aWRlb0lkOiB2aWRlb0lkIC8vIFJlcXVlc3Qgc3BlY2lmaWMgdmlkZW8gcHJvZ3Jlc3MNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSByZXMuZGF0YTsNCiAgICAgICAgICAgICAgICBpZiAoZGF0YS5jb2RlID09PSAwICYmIGRhdGEuZGF0YSAmJiBkYXRhLmRhdGEucHJvZ3Jlc3NTZWNvbmRzID4gMCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLnZpZGVvUGxheWVyLmN1cnJlbnRUaW1lID0gcGFyc2VGbG9hdChkYXRhLmRhdGEucHJvZ3Jlc3NTZWNvbmRzKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYOaBouWkjei/m+W6pjog55So5oi3ICR7dGhpcy51c2VySWR9LCDor77nqIsgJHt0aGlzLmlkfSwg6KeG6aKRICR7dmlkZW9JZH0sIOaXtumXtCAke2RhdGEuZGF0YS5wcm9ncmVzc1NlY29uZHN9YCk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy52aWRlb1BsYXllci5jdXJyZW50VGltZSA9IDA7IC8vIE5vIHByb2dyZXNzIGZvdW5kLCBzdGFydCBmcm9tIGJlZ2lubmluZw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigi6K+35rGC6I635Y+W6L+b5bqm5o6l5Y+j5Ye66ZSZOiIsIGVycm9yKTsNCiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLnZpZGVvUGxheWVyLmN1cnJlbnRUaW1lID0gMDsgLy8gRmFsbGJhY2sgdG8gc3RhcnQgZnJvbSBiZWdpbm5pbmcgb24gZXJyb3INCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCg0KICAgICAgICAvLyAuLi4gKEtlZXAgYWxsIHlvdXIgb3RoZXIgZXhpc3RpbmcgbWV0aG9kczogb25BY3Jvc3MsIHN0b3JldXAsIGdldFN0b3JldXBTdGF0dXMsIHRodW1ic3VwT3JDcmF6aWx5LCBjYW5jZWxUaHVtYnN1cE9yQ3JhemlseSwgZ2V0VGh1bWJzdXBPckNyYXppbHlTdGF0dXMsIGJhY2tDbGljaywgZG93bmxvYWQsIGJ0bkF1dGgsIGVkaXRDbGljaywgZGVsQ2xpY2spDQogICAgICAgIG9uQWNyb3NzKHRhYmxlTmFtZSwgY3Jvc3NPcHRBdWRpdCwgY29tcGFyZUtleSwgY29tcGFyZVZhbHVlLCBpZCkgew0KICAgICAgICAgICAgaWYgKHRoaXMudXNlcklkKSB7IC8vIOehruS/neeUqOaIt0lE5a2Y5ZyoDQogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goew0KICAgICAgICAgICAgICAgICAgICBwYXRoOiBgL2luZGV4LyR7dGFibGVOYW1lfWAsDQogICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiB7DQogICAgICAgICAgICAgICAgICAgICAgICBjcm9zc09wdEF1ZGl0OiBjcm9zc09wdEF1ZGl0LA0KICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFyZUtleTogY29tcGFyZUtleSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBhcmVWYWx1ZTogY29tcGFyZVZhbHVlLA0KICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGlkDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7flhYjnmbvlvZXlkI7mk43kvZwnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgYXN5bmMgc3RvcmV1cChzdGF0dXMpIHsNCiAgICAgICAgICAgIGlmICghdGhpcy51c2VySWQpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7flhYjnmbvlvZXlkI7mk43kvZwnKTsNCiAgICAgICAgICAgICAgICByZXR1cm4NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuc3RvcmV1cFBhcmFtcy51c2VyaWQgPSB0aGlzLnVzZXJJZDsNCiAgICAgICAgICAgIHRoaXMuc3RvcmV1cFBhcmFtcy5uYW1lID0gdGhpcy5kZXRhaWwua2VjaGVuZ21pbmdjaGVuZzsNCiAgICAgICAgICAgIHRoaXMuc3RvcmV1cFBhcmFtcy5waWN0dXJlID0gdGhpcy5kZXRhaWwua2VjaGVuZ3R1cGlhbjsNCiAgICAgICAgICAgIHRoaXMuc3RvcmV1cFBhcmFtcy5yZWZpZCA9IHRoaXMuaWQ7DQogICAgICAgICAgICBsZXQgcmVzID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCdzdG9yZXVwL2FkZCcsIHRoaXMuc3RvcmV1cFBhcmFtcywgeyBwYXJhbXM6IHsgdHlwZTogc3RhdHVzIH0gfSk7DQogICAgICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PSAwKSB7DQogICAgICAgICAgICAgICAgdGhpcy5kZXRhaWwuc3RvcmV1cG51bSA9IHJlcy5kYXRhLmRhdGE7DQogICAgICAgICAgICAgICAgaWYgKHN0YXR1cyA9PSAxKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaXNTdG9yZXVwID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmlzU3RvcmV1cCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMuZGF0YS5tc2cgfHwgJ+aTjeS9nOWksei0pScpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBhc3luYyBnZXRTdG9yZXVwU3RhdHVzKCkgew0KICAgICAgICAgICAgaWYgKCF0aGlzLnVzZXJJZCkgcmV0dXJuOw0KICAgICAgICAgICAgbGV0IHBhcmFtcyA9IHsNCiAgICAgICAgICAgICAgICB1c2VyaWQ6IHRoaXMudXNlcklkLA0KICAgICAgICAgICAgICAgIHJlZmlkOiB0aGlzLmlkLA0KICAgICAgICAgICAgICAgIHRhYmxlbmFtZTogJ2tlY2hlbmd4aW54aScsDQogICAgICAgICAgICAgICAgdHlwZTogMQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbGV0IHJlcyA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KCdzdG9yZXVwL2xpc3QnLCB7IHBhcmFtczogcGFyYW1zIH0pOw0KICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT0gMCAmJiByZXMuZGF0YS5kYXRhLmxpc3QgJiYgcmVzLmRhdGEuZGF0YS5saXN0Lmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICB0aGlzLmlzU3RvcmV1cCA9IHRydWU7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuaXNTdG9yZXVwID0gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGFzeW5jIHRodW1ic3VwT3JDcmF6aWx5KHR5cGUpIHsNCiAgICAgICAgICAgIGlmICghdGhpcy51c2VySWQpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7flhYjnmbvlvZXlkI7mk43kvZwnKTsNCiAgICAgICAgICAgICAgICByZXR1cm4NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMudGh1bWJzdXBPckNyYXppbHlJbmZvLnVzZXJpZCA9IHRoaXMudXNlcklkOw0KICAgICAgICAgICAgdGhpcy50aHVtYnN1cE9yQ3JhemlseUluZm8ucmVmaWQgPSB0aGlzLmlkOw0KICAgICAgICAgICAgdGhpcy50aHVtYnN1cE9yQ3JhemlseUluZm8udHlwZSA9IHR5cGU7DQogICAgICAgICAgICB0aGlzLnRodW1ic3VwT3JDcmF6aWx5SW5mby50YWJsZW5hbWUgPSB0aGlzLnRhYmxlbmFtZTsNCiAgICAgICAgICAgIHRoaXMudGh1bWJzdXBPckNyYXppbHlJbmZvLm5hbWUgPSB0aGlzLmRldGFpbC5rZWNoZW5nbWluZ2NoZW5nOw0KICAgICAgICAgICAgdGhpcy50aHVtYnN1cE9yQ3JhemlseUluZm8ucGljdHVyZSA9IHRoaXMuZGV0YWlsLmtlY2hlbmd0dXBpYW47DQoNCiAgICAgICAgICAgIGxldCByZXMgPSBhd2FpdCB0aGlzLiRodHRwLnBvc3QoJ3N0b3JldXAvYWRkJywgdGhpcy50aHVtYnN1cE9yQ3JhemlseUluZm8pOw0KICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT0gMCkgew0KICAgICAgICAgICAgICAgIGlmICh0eXBlID09IDIxKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZGV0YWlsLnRodW1ic3VwbnVtID0gcmVzLmRhdGEuZGF0YTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1RodW1ic3VwbnVtID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0NyYXppbHludW0gPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmRldGFpbC5jcmF6aWx5bnVtID0gcmVzLmRhdGEuZGF0YTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0NyYXppbHludW0gPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmlzVGh1bWJzdXBudW0gPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmk43kvZzmiJDlip8hJyk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLmRhdGEubXNnIHx8ICfmk43kvZzlpLHotKUnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgYXN5bmMgY2FuY2VsVGh1bWJzdXBPckNyYXppbHkodHlwZSkgew0KICAgICAgICAgICAgaWYgKCF0aGlzLnVzZXJJZCkgew0KICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+ivt+WFiOeZu+W9leWQjuaTjeS9nCcpOw0KICAgICAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbGV0IHBhcmFtcyA9IHsNCiAgICAgICAgICAgICAgICB1c2VyaWQ6IHRoaXMudXNlcklkLA0KICAgICAgICAgICAgICAgIHJlZmlkOiB0aGlzLmlkLA0KICAgICAgICAgICAgICAgIHRhYmxlbmFtZTogdGhpcy50YWJsZW5hbWUsDQogICAgICAgICAgICAgICAgdHlwZTogdHlwZQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbGV0IHJlc0xpc3QgPSBhd2FpdCB0aGlzLiRodHRwLmdldCgnc3RvcmV1cC9saXN0JywgeyBwYXJhbXM6IHBhcmFtcyB9KTsNCiAgICAgICAgICAgIGlmIChyZXNMaXN0LmRhdGEuY29kZSA9PSAwICYmIHJlc0xpc3QuZGF0YS5kYXRhLmxpc3QubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgIGxldCBkZWxJZCA9IHJlc0xpc3QuZGF0YS5kYXRhLmxpc3RbMF0uaWQ7DQogICAgICAgICAgICAgICAgbGV0IHJlcyA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgnc3RvcmV1cC9kZWxldGUnLCBbZGVsSWRdKTsNCiAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09IDIxKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRldGFpbC50aHVtYnN1cG51bSA9IHJlcy5kYXRhLmRhdGE7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzVGh1bWJzdXBudW0gPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGV0YWlsLmNyYXppbHludW0gPSByZXMuZGF0YS5kYXRhOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0NyYXppbHludW0gPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WPlua2iOaIkOWKnyEnKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5kYXRhLm1zZyB8fCAn5Y+W5raI5aSx6LSlJyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmnKrmib7liLDlj6/lj5bmtojnmoTorrDlvZUnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgYXN5bmMgZ2V0VGh1bWJzdXBPckNyYXppbHlTdGF0dXMoKSB7DQogICAgICAgICAgICBpZiAoIXRoaXMudXNlcklkKSByZXR1cm47DQogICAgICAgICAgICBsZXQgcGFyYW1zID0gew0KICAgICAgICAgICAgICAgIHVzZXJpZDogdGhpcy51c2VySWQsDQogICAgICAgICAgICAgICAgcmVmaWQ6IHRoaXMuaWQsDQogICAgICAgICAgICAgICAgdGFibGVuYW1lOiB0aGlzLnRhYmxlbmFtZQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbGV0IHJlc1RodW1ic3VwID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoJ3N0b3JldXAvbGlzdCcsIHsgcGFyYW1zOiB7IC4uLnBhcmFtcywgdHlwZTogMjEgfSB9KTsNCiAgICAgICAgICAgIGlmIChyZXNUaHVtYnN1cC5kYXRhLmNvZGUgPT0gMCAmJiByZXNUaHVtYnN1cC5kYXRhLmRhdGEubGlzdCAmJiByZXNUaHVtYnN1cC5kYXRhLmRhdGEubGlzdC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgdGhpcy5pc1RodW1ic3VwbnVtID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB0aGlzLnRodW1ic3VwT3JDcmF6aWx5SW5mbyA9IHJlc1RodW1ic3VwLmRhdGEuZGF0YS5saXN0WzBdOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLmlzVGh1bWJzdXBudW0gPSBmYWxzZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgbGV0IHJlc0NyYXppbHkgPSBhd2FpdCB0aGlzLiRodHRwLmdldCgnc3RvcmV1cC9saXN0JywgeyBwYXJhbXM6IHsgLi4ucGFyYW1zLCB0eXBlOiAyMiB9IH0pOw0KICAgICAgICAgICAgaWYgKHJlc0NyYXppbHkuZGF0YS5jb2RlID09IDAgJiYgcmVzQ3JhemlseS5kYXRhLmRhdGEubGlzdCAmJiByZXNDcmF6aWx5LmRhdGEuZGF0YS5saXN0Lmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICB0aGlzLmlzQ3JhemlseW51bSA9IHRydWU7DQogICAgICAgICAgICAgICAgdGhpcy50aHVtYnN1cE9yQ3JhemlseUluZm8gPSByZXNDcmF6aWx5LmRhdGEuZGF0YS5saXN0WzBdOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLmlzQ3JhemlseW51bSA9IGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBiYWNrQ2xpY2soKSB7DQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpOw0KICAgICAgICB9LA0KICAgICAgICBkb3dubG9hZChmaWxlKSB7DQogICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHRoaXMuYmFzZVVybCArIGZpbGUNCiAgICAgICAgfSwNCiAgICAgICAgYnRuQXV0aCh0YWJsZW5hbWUsIGtleSkgew0KICAgICAgICAgICAgaWYgKCFrZXkpIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgaWYgKCF0aGlzLiRzdG9yZS5zdGF0ZS51c2VyIHx8ICF0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLnNlc3Npb24gfHwgIXRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuc2Vzc2lvbi5tZW51TGlzdCkgcmV0dXJuIGZhbHNlDQogICAgICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXNlci5zZXNzaW9uLm1lbnVMaXN0LmZpbHRlcihpdGVtID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoaXRlbS50YWJsZW5hbWUgPT0gdGFibGVuYW1lICYmIGl0ZW0uYnV0dG9ubmFtZSA9PSBrZXkpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICAgICAgfSBlbHNlIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0pLmxlbmd0aCA+IDANCiAgICAgICAgfSwNCiAgICAgICAgZWRpdENsaWNrKCkgew0KICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9pbmRleC8nICsgdGhpcy50YWJsZW5hbWUgKyAnL2FkZC8nICsgdGhpcy5pZCkNCiAgICAgICAgfSwNCiAgICAgICAgYXN5bmMgZGVsQ2xpY2soKSB7DQogICAgICAgICAgICB0aGlzLiRjb25maXJtKCfnoa7lrpropoHliKDpmaTlkJc/JywgJ+aPkOekuicsIHsNCiAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsDQogICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsDQogICAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnDQogICAgICAgICAgICB9KS50aGVuKGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgICAgICBsZXQgcmVzID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KHRoaXMudGFibGVuYW1lICsgJy9kZWxldGUnLCBbdGhpcy5pZF0pOw0KICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5YqfJywNCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAsDQogICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlOiAoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMuZGF0YS5tc2cgfHwgJ+WIoOmZpOWksei0pScpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9LA0KICAgICAgICBhc3luYyBnZXREZXRhaWwoKSB7DQogICAgICAgICAgICBsZXQgcmVzID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoJ2tlY2hlbmd4aW54aS9kZXRhaWwvJyArIHRoaXMuaWQpOw0KICAgICAgICAgICAgdGhpcy5kZXRhaWwgPSByZXMuZGF0YS5kYXRhOw0KICAgICAgICAgICAgaWYgKHRoaXMuZGV0YWlsLmNvbnRlbnRwZGZ1cmwpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRwZGZ1cmwgPSB0aGlzLmRldGFpbC5jb250ZW50cGRmdXJsOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgIH0NCn07DQo="},{"version":3,"sources":["detail.vue"],"names":[],"mappings":";AA0LA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"detail.vue","sourceRoot":"src/pages/kechengxinxi","sourcesContent":["<template>\r\n    <div>\r\n        <div :style='{ \"padding\": \"20px 7%\", \"margin\": \"0px auto\", \"borderColor\": \"#ddd\", \"borderRadius\": \"0px\", \"background\": \"none\", \"borderWidth\": \"0 0 1px\", \"width\": \"100%\", \"borderStyle\": \"solid\" }'\r\n            class=\"breadcrumb-preview\">\r\n            <el-breadcrumb :separator=\"'Ξ'\" :style='{ \"fontSize\": \"14px\", \"lineHeight\": \"1\" }'>\r\n                <el-breadcrumb-item class=\"item1\" to=\"/\"><a>首页</a></el-breadcrumb-item>\r\n                <el-breadcrumb-item class=\"item2\" v-for=\"(item, index) in breadcrumbItem\" :key=\"index\"\r\n                    to=\"/index/kechengxinxi\"><a>{{ item.name }}</a></el-breadcrumb-item>\r\n                <el-breadcrumb-item class=\"item3\"><a href=\"javascript:void(0);\">详情</a></el-breadcrumb-item>\r\n            </el-breadcrumb>\r\n        </div>\r\n        <div\r\n            :style='{ \"padding\": \"20px 7%\", \"margin\": \"0px auto\", \"borderColor\": \"#ddd\", \"borderRadius\": \"0px\", \"background\": \"none\", \"borderWidth\": \"0 0 1px\", \"width\": \"100%\", \"borderStyle\": \"solid\" }'>\r\n            <el-button size=\"mini\" @click=\"backClick\">返回</el-button>\r\n        </div>\r\n\r\n        <div class=\"detail-preview\"\r\n            :style='{ \"padding\": \"0 7%\", \"margin\": \"40px auto\", \"flexWrap\": \"wrap\", \"display\": \"flex\", \"width\": \"100%\", \"position\": \"relative\", \"justifyContent\": \"space-between\" }'>\r\n            <div class=\"attr\"\r\n                :style='{ \"minHeight\": \"400px\", \"padding\": \"30px\", \"boxShadow\": \"0px 0px 0px #ddd\", \"margin\": \"0 0 20px\", \"borderColor\": \"#ddd\", \"borderRadius\": \"0px\", \"background\": \"none\", \"borderWidth\": \"0 0 0px 0\", \"width\": \"48%\", \"borderStyle\": \"solid\" }'>\r\n                <el-carousel :indicator-position='detailBanner.length > 1 ? \"outside\" : \"none\"' :interval=\"5000\"\r\n                    :autoplay=\"true\" :style='{ \"width\": \"100%\", \"margin\": \"0 auto\", \"borderRadius\": \"0px\", \"height\": \"350px\" }'>\r\n                    <el-carousel-item :key=\"item\" v-for=\"item in detailBanner\">\r\n                        <img :style='{ \"width\": \"100%\", \"objectFit\": \"cover\", \"borderRadius\": \"0px\", \"height\": \"100%\" }'\r\n                            :src=\"baseUrl + item\" />\r\n                    </el-carousel-item>\r\n                </el-carousel>\r\n                <div class=\"info\"\r\n                    :style='{ \"width\": \"100%\", \"padding\": \"0px\", \"margin\": \"20px 0 0 0\", \"background\": \"none\", \"height\": \"auto\" }'>\r\n                    <div class=\"item\"\r\n                        :style='{ \"padding\": \"0px\", \"margin\": \"0 0 10px 0\", \"alignItems\": \"center\", \"background\": \"none\", \"display\": \"flex\", \"width\": \"100%\", \"justifyContent\": \"spaceBetween\" }'>\r\n                        <div class=\"title\"\r\n                            :style='{ \"padding\": \"0 10px\", \"color\": \"#333\", \"textAlign\": \"left\", \"width\": \"90px\", \"fontSize\": \"16px\", \"lineHeight\": \"40px\", \"fontWeight\": \"600\" }'>\r\n                            课程名称</div>\r\n                        <div class=\"text\"\r\n                            :style='{ \"border\": \"0px solid #dfdfdf\", \"padding\": \"10px\", \"color\": \"#666\", \"borderRadius\": \"0px\", \"textAlign\": \"left\", \"background\": \"#f7f7f7\", \"flex\": \"1\", \"fontSize\": \"14px\", \"lineHeight\": \"24px\" }'>\r\n                            {{ detail.kechengmingcheng }}</div>\r\n                    </div>\r\n                    <div class=\"item\"\r\n                        :style='{ \"padding\": \"0px\", \"margin\": \"0 0 10px 0\", \"alignItems\": \"center\", \"background\": \"none\", \"display\": \"flex\", \"width\": \"100%\", \"justifyContent\": \"spaceBetween\" }'>\r\n                        <div class=\"title\"\r\n                            :style='{ \"padding\": \"0 10px\", \"color\": \"#333\", \"textAlign\": \"left\", \"width\": \"90px\", \"fontSize\": \"16px\", \"lineHeight\": \"40px\", \"fontWeight\": \"600\" }'>\r\n                            教师名称</div>\r\n                        <div class=\"text\"\r\n                            :style='{ \"border\": \"0px solid #dfdfdf\", \"padding\": \"10px\", \"color\": \"#666\", \"borderRadius\": \"0px\", \"textAlign\": \"left\", \"background\": \"#f7f7f7\", \"flex\": \"1\", \"fontSize\": \"14px\", \"lineHeight\": \"24px\" }'>\r\n                            {{ detail.jiaoshimc }}</div>\r\n                    </div>\r\n                    <div class=\"item\"\r\n                        :style='{ \"padding\": \"0px\", \"margin\": \"0 0 10px 0\", \"alignItems\": \"center\", \"background\": \"none\", \"display\": \"flex\", \"width\": \"100%\", \"justifyContent\": \"spaceBetween\" }'>\r\n                        <div class=\"title\"\r\n                            :style='{ \"padding\": \"0 10px\", \"color\": \"#333\", \"textAlign\": \"left\", \"width\": \"90px\", \"fontSize\": \"16px\", \"lineHeight\": \"40px\", \"fontWeight\": \"600\" }'>\r\n                            课程类型</div>\r\n                        <div class=\"text\"\r\n                            :style='{ \"border\": \"0px solid #dfdfdf\", \"padding\": \"10px\", \"color\": \"#666\", \"borderRadius\": \"0px\", \"textAlign\": \"left\", \"background\": \"#f7f7f7\", \"flex\": \"1\", \"fontSize\": \"14px\", \"lineHeight\": \"24px\" }'>\r\n                            {{ detail.kechengleixing }}</div>\r\n                    </div>\r\n                    <div class=\"item\"\r\n                        :style='{ \"padding\": \"0px\", \"margin\": \"0 0 10px 0\", \"alignItems\": \"center\", \"background\": \"none\", \"display\": \"flex\", \"width\": \"100%\", \"justifyContent\": \"spaceBetween\" }'>\r\n                        <div class=\"title\"\r\n                            :style='{ \"padding\": \"0 10px\", \"color\": \"#333\", \"textAlign\": \"left\", \"width\": \"90px\", \"fontSize\": \"16px\", \"lineHeight\": \"40px\", \"fontWeight\": \"600\" }'>\r\n                            发布日期</div>\r\n                        <div class=\"text\"\r\n                            :style='{ \"border\": \"0px solid #dfdfdf\", \"padding\": \"10px\", \"color\": \"#666\", \"borderRadius\": \"0px\", \"textAlign\": \"left\", \"background\": \"#f7f7f7\", \"flex\": \"1\", \"fontSize\": \"14px\", \"lineHeight\": \"24px\" }'>\r\n                            {{ detail.faburiqi }}</div>\r\n                    </div>\r\n                    <div class=\"item\"\r\n                        :style='{ \"padding\": \"0px\", \"margin\": \"0 0 10px 0\", \"alignItems\": \"center\", \"background\": \"none\", \"display\": \"flex\", \"width\": \"100%\", \"justifyContent\": \"spaceBetween\" }'>\r\n                        <div class=\"title\"\r\n                            :style='{ \"padding\": \"0 10px\", \"color\": \"#333\", \"textAlign\": \"left\", \"width\": \"90px\", \"fontSize\": \"16px\", \"lineHeight\": \"40px\", \"fontWeight\": \"600\" }'>\r\n                            点击次数</div>\r\n                        <div class=\"text\"\r\n                            :style='{ \"border\": \"0px solid #dfdfdf\", \"padding\": \"10px\", \"color\": \"#666\", \"borderRadius\": \"0px\", \"textAlign\": \"left\", \"background\": \"#f7f7f7\", \"flex\": \"1\", \"fontSize\": \"14px\", \"lineHeight\": \"24px\" }'>\r\n                            {{ detail.clicknum }}</div>\r\n                    </div>\r\n                    <div class=\"item\"\r\n                        :style='{ \"padding\": \"0px\", \"margin\": \"0 0 10px 0\", \"alignItems\": \"center\", \"background\": \"none\", \"display\": \"flex\", \"width\": \"100%\", \"justifyContent\": \"spaceBetween\" }'>\r\n                        <div class=\"title\"\r\n                            :style='{ \"padding\": \"0 10px\", \"color\": \"#333\", \"textAlign\": \"left\", \"width\": \"90px\", \"fontSize\": \"16px\", \"lineHeight\": \"40px\", \"fontWeight\": \"600\" }'>\r\n                            赞</div>\r\n                        <div class=\"text\"\r\n                            :style='{ \"border\": \"0px solid #dfdfdf\", \"padding\": \"10px\", \"color\": \"#666\", \"borderRadius\": \"0px\", \"textAlign\": \"left\", \"background\": \"#f7f7f7\", \"flex\": \"1\", \"fontSize\": \"14px\", \"lineHeight\": \"24px\" }'>\r\n                            {{ detail.thumbsupnum }}</div>\r\n                    </div>\r\n                    <div class=\"item\"\r\n                        :style='{ \"padding\": \"0px\", \"margin\": \"0 0 10px 0\", \"alignItems\": \"center\", \"background\": \"none\", \"display\": \"flex\", \"width\": \"100%\", \"justifyContent\": \"spaceBetween\" }'>\r\n                        <div class=\"title\"\r\n                            :style='{ \"padding\": \"0 10px\", \"color\": \"#333\", \"textAlign\": \"left\", \"width\": \"90px\", \"fontSize\": \"16px\", \"lineHeight\": \"40px\", \"fontWeight\": \"600\" }'>\r\n                            踩</div>\r\n                        <div class=\"text\"\r\n                            :style='{ \"border\": \"0px solid #dfdfdf\", \"padding\": \"10px\", \"color\": \"#666\", \"borderRadius\": \"0px\", \"textAlign\": \"left\", \"background\": \"#f7f7f7\", \"flex\": \"1\", \"fontSize\": \"14px\", \"lineHeight\": \"24px\" }'>\r\n                            {{ detail.crazilynum }}</div>\r\n                    </div>\r\n                    <div class=\"btn\"\r\n                        :style='{ \"padding\": \"0px\", \"flexWrap\": \"wrap\", \"display\": \"flex\", \"width\": \"100%\", \"justifyContent\": \"center\" }'>\r\n                        <el-button\r\n                            :style='{ \"border\": \"1px solid #148f97\", \"cursor\": \"pointer\", \"padding\": \"0 20px\", \"margin\": \"0 10px 10px 0\", \"outline\": \"none\", \"color\": \"#148f97\", \"borderRadius\": \"0px\", \"background\": \"#fff\", \"width\": \"auto\", \"fontSize\": \"14px\", \"height\": \"36px\" }'\r\n                            v-if=\"btnAuth('kechengxinxi', '修改')\" @click=\"editClick\"><i\r\n                                class=\"el-icon-edit-outline\"></i>修改</el-button>\r\n                        <el-button\r\n                            :style='{ \"border\": \"1px solid #dc3333\", \"cursor\": \"pointer\", \"padding\": \"0 20px\", \"margin\": \"0 10px 10px 0\", \"outline\": \"none\", \"color\": \"#dc3333\", \"borderRadius\": \"0px\", \"background\": \"#fff\", \"width\": \"auto\", \"fontSize\": \"14px\", \"height\": \"36px\" }'\r\n                            v-if=\"btnAuth('kechengxinxi', '删除')\" @click=\"delClick\"><i\r\n                                class=\"el-icon-delete2\"></i>删除</el-button>\r\n                        <el-button\r\n                            :style='{ \"border\": \"1px solid #9240b9\", \"cursor\": \"pointer\", \"padding\": \"0 20px\", \"margin\": \"0 10px 10px 0\", \"outline\": \"none\", \"color\": \"#9240b9\", \"borderRadius\": \"0px\", \"background\": \"#fff\", \"width\": \"auto\", \"fontSize\": \"14px\", \"height\": \"36px\" }'\r\n                            @click=\"storeup(1)\" v-if=\"!isStoreup\"><i class=\"el-icon-star-off\"></i>收藏</el-button>\r\n                        <el-button\r\n                            :style='{ \"border\": \"1px solid #9240b9\", \"cursor\": \"pointer\", \"padding\": \"0 20px\", \"margin\": \"0 10px 10px 0\", \"outline\": \"none\", \"color\": \"#9240b9\", \"borderRadius\": \"0px\", \"background\": \"#fff\", \"width\": \"auto\", \"fontSize\": \"14px\", \"height\": \"36px\" }'\r\n                            @click=\"storeup(2)\" v-else><i class=\"el-icon-star-on\"></i>已收藏</el-button>\r\n                        <el-button\r\n                            :style='{ \"border\": \"1px solid #f2b236\", \"cursor\": \"pointer\", \"padding\": \"0 20px\", \"margin\": \"0 10px 10px 0\", \"outline\": \"none\", \"color\": \"#f2b236\", \"borderRadius\": \"0px\", \"background\": \"#fff\", \"width\": \"auto\", \"fontSize\": \"14px\", \"height\": \"36px\" }'\r\n                            @click=\"thumbsupOrCrazily(21)\" v-if=\"!isThumbsupnum\"><i\r\n                                class=\"el-icon-dianzan1\"></i>赞</el-button>\r\n                        <el-button\r\n                            :style='{ \"border\": \"1px solid #f2b236\", \"cursor\": \"pointer\", \"padding\": \"0 20px\", \"margin\": \"0 10px 10px 0\", \"outline\": \"none\", \"color\": \"#f2b236\", \"borderRadius\": \"0px\", \"background\": \"#fff\", \"width\": \"auto\", \"fontSize\": \"14px\", \"height\": \"36px\" }'\r\n                            @click=\"cancelThumbsupOrCrazily(21)\" v-else><i class=\"el-icon-dianzan1\"></i>已赞</el-button>\r\n                        <el-button\r\n                            :style='{ \"border\": \"1px solid #54c03b\", \"cursor\": \"pointer\", \"padding\": \"0 20px\", \"margin\": \"0 10px 10px 0\", \"outline\": \"none\", \"color\": \"#54c03b\", \"borderRadius\": \"0px\", \"background\": \"#fff\", \"width\": \"auto\", \"fontSize\": \"14px\", \"height\": \"36px\" }'\r\n                            @click=\"thumbsupOrCrazily(22)\" v-if=\"!isCrazilynum\"><i class=\"el-icon-cai\"></i>踩</el-button>\r\n                        <el-button\r\n                            :style='{ \"border\": \"1px solid #54c03b\", \"cursor\": \"pointer\", \"padding\": \"0 20px\", \"margin\": \"0 10px 10px 0\", \"outline\": \"none\", \"color\": \"#54c03b\", \"borderRadius\": \"0px\", \"background\": \"#fff\", \"width\": \"auto\", \"fontSize\": \"14px\", \"height\": \"36px\" }'\r\n                            @click=\"cancelThumbsupOrCrazily(22)\" v-else><i class=\"el-icon-cai\"></i>已踩</el-button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"content\"\r\n                :style='{ \"boxShadow\": \"0px 0px 0px #ddd\", \"padding\": \"30px\", \"margin\": \"0 0 20px\", \"borderColor\": \"#ddd\", \"borderRadius\": \"0px\", \"background\": \"none\", \"borderWidth\": \"0 0 0px 0\", \"width\": \"48%\", \"borderStyle\": \"solid\" }'>\r\n                <div class=\"detail-content-item\"\r\n                    :style='{ \"padding\": \"0px\", \"margin\": \"0 0 20px 0\", \"background\": \"#fff\", \"flexWrap\": \"wrap\", \"display\": \"flex\", \"width\": \"100%\", \"position\": \"relative\", \"justifyContent\": \"space-between\" }'>\r\n                    <div class=\"top\"\r\n                        :style='{ \"width\": \"100%\", \"padding\": \"0px 0 10px\", \"margin\": \"0px auto\", \"borderColor\": \"#ddd\", \"textAlign\": \"left\", \"borderWidth\": \"0px 0px 1px 0px\", \"background\": \"none\", \"borderStyle\": \"solid\" }'>\r\n                        <div\r\n                            :style='{ \"padding\": \"0 10px\", \"lineHeight\": \"auto\", \"fontSize\": \"16px\", \"color\": \"#333\", \"fontWeight\": \"600\" }'>\r\n                            课程详情</div>\r\n                    </div>\r\n                    <div class=\"content\"\r\n                        :style='{ \"padding\": \"10px\", \"width\": \"100%\", \"margin\": \"10px 0 0 0\", \"fontSize\": \"14px\", \"color\": \"#666\", \"textIndent\": \"2em\", \"lineHeight\": \"2\" }'>\r\n                        <div v-html=\"detail.kechenggaiyao\"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div v-if=\"currentVideoUrl\" :style='{ \"padding\": \"20px 7%\" }'>\r\n            <h2 :style='{ \"marginBottom\": \"10px\", \"fontSize\": \"24px\", \"color\": \"#333\" }'>当前播放: {{ currentVideoTitle }}</h2>\r\n            <video ref=\"videoPlayer\" :src=\"currentVideoUrl\" controls autoplay width=\"100%\" height=\"auto\"\r\n                @timeupdate=\"onTimeUpdate\" @ended=\"onVideoEnded\"></video>\r\n        </div>\r\n        <div v-else-if=\"detail.kechengshipin\" :style='{ \"padding\": \"20px 7%\" }'>\r\n            <h2 :style='{ \"marginBottom\": \"10px\", \"fontSize\": \"24px\", \"color\": \"#333\" }'>课程视频</h2>\r\n            <video ref=\"videoPlayer\" :src=\"detail.kechengshipin\" controls autoplay width=\"100%\" height=\"auto\"\r\n                @timeupdate=\"onTimeUpdate\" @ended=\"onVideoEnded\"></video>\r\n        </div>\r\n        <div v-else :style='{ \"padding\": \"20px 7%\" }'>\r\n            <p>暂无视频</p>\r\n        </div>\r\n\r\n\r\n        \r\n        <div>\r\n            <div class=\"detail2\"\r\n                :style='{ \"border\": \"0px solid #ddd\", \"padding\": \"0px\", \"margin\": \"40px 0\", \"borderRadius\": \"0px\", \"background\": \"#fff\", \"flex\": \"1\", \"width\": \"65%\", \"clear\": \"both\", \"order\": \"50\" }'>\r\n                <div\r\n                    :style='{ \"border\": \"1px solid #ddd\", \"padding\": \"10px\", \"margin\": \"0 0 10px 0\", \"borderRadius\": \"4px\", \"background\": \"#fcfcfc\", \"display\": \"flex\", \"justifyContent\": \"space-between\", \"alignItems\": \"center\" }'>\r\n                    <div :style='{ \"color\": \"#333\", \"fontSize\": \"16px\", \"fontWeight\": \"600\" }'>课程内容</div>\r\n                    <el-button v-if=\"contentpdfurl\" size=\"mini\" type=\"primary\" @click=\"downloadDocument\"\r\n                        :style='{ \"marginLeft\": \"10px\" }'>下载文档</el-button>\r\n                </div>\r\n                <div :style='{ \"background\": \"#FFF\" }' v-html=\"detail.kechengneirong\"></div>\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <div v-if=\"courseVideos.length > 0\" :style='{ \"padding\": \"20px 7%\" }'>\r\n            <h3 :style='{ \"marginBottom\": \"10px\", \"fontSize\": \"20px\", \"color\": \"#333\" }'>视频章节</h3>\r\n            <ul :style='{ \"listStyle\": \"none\", \"padding\": \"0\" }'>\r\n                <li v-for=\"video in courseVideos\" :key=\"video.id\" @click=\"playSelectedVideo(video.id)\"\r\n                    :style='{ \"cursor\": \"pointer\", \"padding\": \"10px\", \"marginBottom\": \"5px\", \"borderBottom\": \"1px solid #eee\", \"background\": video.id === currentSessionId ? \"#e6f7ff\" : \"none\", \"fontWeight\": video.id === currentSessionId ? \"bold\" : \"normal\" }'>\r\n                    {{ video.courseSession }} - {{ video.title || '无标题' }}\r\n                </li>\r\n            </ul>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { Vue } from 'vue';\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            tablename: 'kechengxinxi',\r\n            baseUrl: this.$config ? this.$config.baseUrl : 'http://localhost:8080/springbootn3op2l20/', // Ensure this matches your backend URL\r\n            detail: {},\r\n            detailBanner: [],\r\n            isStoreup: false,\r\n            isCrazilynum: false,\r\n            isThumbsupnum: false,\r\n            storeupParams: {},\r\n            thumbsupOrCrazilyInfo: {},\r\n            id: '', // Course ID (from route query)\r\n\r\n            courseVideos: [], // Stores list of video chapters from coursevideos table\r\n            currentSessionId: null, // ID of the currently playing video chapter\r\n            currentVideoUrl: '', // URL of the currently playing video chapter\r\n            currentVideoTitle: '', // Title of the currently playing video chapter\r\n            userId: null, // Current user ID (fetched from backend)\r\n\r\n            contentpdfurl: '',\r\n        };\r\n    },\r\n    async created() {\r\n        this.id = this.$route.query.id;\r\n        console.log(\"获取到的课程ID:\", this.id);\r\n        this.getDetail()\r\n        // Fetch User ID first\r\n        try {\r\n            const userRes = await this.$http.get('yonghu/currentUserId'); // Adjust URL based on your user controller path\r\n            if (userRes.data && userRes.data.code === 0) {\r\n                this.userId = userRes.data.userId;\r\n                console.log(\"从后端获取到的用户ID:\", this.userId);\r\n            } else {\r\n                console.warn(\"获取用户ID失败:\", userRes.data.msg || '用户未登录或会话过期');\r\n                // Optionally redirect to login or show a message\r\n            }\r\n        } catch (error) {\r\n            console.error(\"请求用户ID接口出错:\", error);\r\n        }\r\n\r\n        this.init();\r\n    },\r\n    methods: {\r\n        async init() {\r\n            try {\r\n                let res = await this.$http.get(`${this.tablename}/detail/${this.id}`);\r\n                if (res.data && res.data.code === 0 && res.data.data) {\r\n                    this.detail = res.data.data;\r\n                    this.detailBanner = this.detail.kechengtupian ? this.detail.kechengtupian.split(',') : [];\r\n\r\n                    await this.getCourseVideos();\r\n\r\n                    if (this.courseVideos.length > 0) {\r\n                        let lastViewedVideoId = await this.findLastViewedVideoId();\r\n                        if (lastViewedVideoId) {\r\n                            this.playSelectedVideo(lastViewedVideoId);\r\n                        } else {\r\n                            this.playSelectedVideo(this.courseVideos[0].id);\r\n                        }\r\n                    } else if (this.detail.kechengshipin) {\r\n                        this.currentSessionId = this.id;\r\n                        this.currentVideoUrl = this.detail.kechengshipin;\r\n                        this.currentVideoTitle = this.detail.kechengmingcheng;\r\n                        this.$nextTick(async () => {\r\n                            await this.restoreProgress(this.currentSessionId);\r\n                            if (this.$refs.videoPlayer && this.$refs.videoPlayer.paused) {\r\n                                this.$refs.videoPlayer.play().catch(e => console.warn(\"视频播放失败或用户未交互:\", e));\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                    // 4. Fetch storeup and thumbsup status if user is logged in\r\n                    if (this.userId) {\r\n                        this.getStoreupStatus();\r\n                        this.getThumbsupOrCrazilyStatus();\r\n                    }\r\n\r\n                } else {\r\n                    console.error(\"获取课程详情失败:\", res.data.msg || '未知错误');\r\n                }\r\n            } catch (error) {\r\n                console.error(\"请求课程详情接口出错:\", error);\r\n            }\r\n\r\n\r\n        },\r\n\r\n        async getCourseVideos() {\r\n            try {\r\n                const videosRes = await this.$http.get('coursevideos/listByCourseId', { params: { courseId: this.id } });\r\n                if (videosRes.data && videosRes.data.code === 0 && videosRes.data.data) {\r\n                    this.courseVideos = videosRes.data.data;\r\n                } else {\r\n                    console.warn(\"获取课程视频章节失败:\", videosRes.data.msg || \"未知错误\");\r\n                    this.courseVideos = [];\r\n                }\r\n            } catch (error) {\r\n                console.error(\"请求课程视频列表接口出错:\", error);\r\n                this.courseVideos = [];\r\n            }\r\n        },\r\n\r\n        async findLastViewedVideoId() {\r\n            if (!this.userId || this.courseVideos.length === 0) return null;\r\n\r\n            // Iterate through videos to find if any has saved progress\r\n            for (const video of this.courseVideos) {\r\n                try {\r\n                    const progressRes = await this.$http.get('courseprogress/getOne', {\r\n                        params: {\r\n                            courseId: this.id,\r\n                            videoId: video.id\r\n                        }\r\n                    });\r\n                    if (progressRes.data && progressRes.data.code === 0 && progressRes.data.data && progressRes.data.data.progressSeconds > 0) {\r\n                        return video.id; // Return the ID of the first video with progress\r\n                    }\r\n                } catch (error) {\r\n                    console.error(`检查视频 ${video.id} 进度时出错:`, error);\r\n                }\r\n            }\r\n            return null; // No video with saved progress found\r\n        },\r\n\r\n        // Play selected video (for multi-chapter courses)\r\n        playSelectedVideo(videoId) {\r\n            const selectedVideo = this.courseVideos.find(video => video.id === videoId);\r\n            if (selectedVideo) {\r\n                this.currentSessionId = selectedVideo.id;\r\n                this.currentVideoUrl = selectedVideo.videoUrl;\r\n                this.currentVideoTitle = `${selectedVideo.courseSession || ''} - ${selectedVideo.title || '无标题'}`;\r\n                console.log(`正在播放视频: ${this.currentVideoUrl}`);\r\n                this.$nextTick(async () => {\r\n                    await this.restoreProgress(this.currentSessionId);\r\n                    if (this.$refs.videoPlayer && this.$refs.videoPlayer.paused) {\r\n                        this.$refs.videoPlayer.play().catch(e => console.warn(\"视频播放失败或用户未交互\", e));\r\n                    }\r\n                });\r\n            }\r\n        },\r\n\r\n        getFileNameFromUrl(url) {\r\n            if (!url) return '';\r\n            const parts = url.split('/');\r\n            return parts[parts.length - 1];\r\n        },\r\n\r\n        downloadDocument() {\r\n            const pdfUrl = this.detail.contentpdfurl;\r\n            if (pdfUrl) {\r\n                const documentFileName = this.getFileNameFromUrl(pdfUrl);\r\n                const link = document.createElement('a');\r\n                link.href = pdfUrl;\r\n\r\n                link.setAttribute('download', documentFileName);\r\n                document.body.appendChild(link);\r\n                link.click();\r\n                document.body.removeChild(link);\r\n\r\n                console.log(`正在下载文档: ${documentFileName}`);\r\n            } else {\r\n                this.$message.warning('没有可下载的文档。');\r\n            }\r\n        },\r\n\r\n        // Video playback events\r\n        onTimeUpdate() {\r\n            if (this.userId && this.currentSessionId && this.$refs.videoPlayer) {\r\n                // Save progress every 5 seconds (or adjust frequency)\r\n                if (Math.floor(this.$refs.videoPlayer.currentTime) % 5 === 0 && Math.floor(this.$refs.videoPlayer.currentTime) !== 0) {\r\n                    this.saveProgress(this.currentSessionId, this.$refs.videoPlayer.currentTime, this.$refs.videoPlayer.duration);\r\n                }\r\n            }\r\n        },\r\n        onVideoEnded() {\r\n            if (this.userId && this.currentSessionId && this.$refs.videoPlayer) {\r\n                // Save progress at 0 (or total duration) when video ends\r\n                this.saveProgress(this.currentSessionId, this.$refs.videoPlayer.duration || 0, this.$refs.videoPlayer.duration);\r\n            }\r\n        },\r\n\r\n        // Save video playback progress to backend\r\n        async saveProgress(videoId, currentTime, totalDuration) {\r\n            if (!this.userId || !videoId || !this.$refs.videoPlayer) {\r\n                return;\r\n            }\r\n\r\n            const progressData = {\r\n                userId: this.userId,\r\n                courseId: Number(this.id), // Ensure it's Number type\r\n                videoId: Number(videoId), // Use the actual video ID for tracking\r\n                progressSeconds: currentTime,\r\n                totalSeconds: totalDuration // Can send total duration if you want to store it\r\n            };\r\n\r\n            try {\r\n                const res = await this.$http.post('courseprogress/saveOrUpdate', progressData);\r\n                if (res.data.code === 0) {\r\n                    // console.log(\"学习进度已保存:\", currentTime);\r\n                } else {\r\n                    console.error(\"保存学习进度失败:\", res.data.msg);\r\n                }\r\n            } catch (error) {\r\n                console.error(\"请求保存进度接口出错:\", error);\r\n            }\r\n        },\r\n\r\n        // Restore video playback progress from backend\r\n        async restoreProgress(videoId) {\r\n            if (!this.userId || !videoId || !this.$refs.videoPlayer) {\r\n                return;\r\n            }\r\n            try {\r\n                const res = await this.$http.get('courseprogress/getOne', {\r\n                    params: {\r\n                        courseId: this.id,\r\n                        videoId: videoId // Request specific video progress\r\n                    }\r\n                });\r\n                const data = res.data;\r\n                if (data.code === 0 && data.data && data.data.progressSeconds > 0) {\r\n                    this.$refs.videoPlayer.currentTime = parseFloat(data.data.progressSeconds);\r\n                    console.log(`恢复进度: 用户 ${this.userId}, 课程 ${this.id}, 视频 ${videoId}, 时间 ${data.data.progressSeconds}`);\r\n                } else {\r\n                    this.$refs.videoPlayer.currentTime = 0; // No progress found, start from beginning\r\n                }\r\n            } catch (error) {\r\n                console.error(\"请求获取进度接口出错:\", error);\r\n                this.$refs.videoPlayer.currentTime = 0; // Fallback to start from beginning on error\r\n            }\r\n        },\r\n\r\n        // ... (Keep all your other existing methods: onAcross, storeup, getStoreupStatus, thumbsupOrCrazily, cancelThumbsupOrCrazily, getThumbsupOrCrazilyStatus, backClick, download, btnAuth, editClick, delClick)\r\n        onAcross(tableName, crossOptAudit, compareKey, compareValue, id) {\r\n            if (this.userId) { // 确保用户ID存在\r\n                this.$router.push({\r\n                    path: `/index/${tableName}`,\r\n                    query: {\r\n                        crossOptAudit: crossOptAudit,\r\n                        compareKey: compareKey,\r\n                        compareValue: compareValue,\r\n                        id: id\r\n                    }\r\n                })\r\n            } else {\r\n                this.$message.error('请先登录后操作');\r\n            }\r\n        },\r\n        async storeup(status) {\r\n            if (!this.userId) {\r\n                this.$message.error('请先登录后操作');\r\n                return\r\n            }\r\n            this.storeupParams.userid = this.userId;\r\n            this.storeupParams.name = this.detail.kechengmingcheng;\r\n            this.storeupParams.picture = this.detail.kechengtupian;\r\n            this.storeupParams.refid = this.id;\r\n            let res = await this.$http.post('storeup/add', this.storeupParams, { params: { type: status } });\r\n            if (res.data.code == 0) {\r\n                this.detail.storeupnum = res.data.data;\r\n                if (status == 1) {\r\n                    this.isStoreup = true;\r\n                } else {\r\n                    this.isStoreup = false;\r\n                }\r\n            } else {\r\n                this.$message.error(res.data.msg || '操作失败');\r\n            }\r\n        },\r\n        async getStoreupStatus() {\r\n            if (!this.userId) return;\r\n            let params = {\r\n                userid: this.userId,\r\n                refid: this.id,\r\n                tablename: 'kechengxinxi',\r\n                type: 1\r\n            }\r\n            let res = await this.$http.get('storeup/list', { params: params });\r\n            if (res.data.code == 0 && res.data.data.list && res.data.data.list.length > 0) {\r\n                this.isStoreup = true;\r\n            } else {\r\n                this.isStoreup = false;\r\n            }\r\n        },\r\n        async thumbsupOrCrazily(type) {\r\n            if (!this.userId) {\r\n                this.$message.error('请先登录后操作');\r\n                return\r\n            }\r\n            this.thumbsupOrCrazilyInfo.userid = this.userId;\r\n            this.thumbsupOrCrazilyInfo.refid = this.id;\r\n            this.thumbsupOrCrazilyInfo.type = type;\r\n            this.thumbsupOrCrazilyInfo.tablename = this.tablename;\r\n            this.thumbsupOrCrazilyInfo.name = this.detail.kechengmingcheng;\r\n            this.thumbsupOrCrazilyInfo.picture = this.detail.kechengtupian;\r\n\r\n            let res = await this.$http.post('storeup/add', this.thumbsupOrCrazilyInfo);\r\n            if (res.data.code == 0) {\r\n                if (type == 21) {\r\n                    this.detail.thumbsupnum = res.data.data;\r\n                    this.isThumbsupnum = true;\r\n                    this.isCrazilynum = false;\r\n                } else {\r\n                    this.detail.crazilynum = res.data.data;\r\n                    this.isCrazilynum = true;\r\n                    this.isThumbsupnum = false;\r\n                }\r\n                this.$message.success('操作成功!');\r\n            } else {\r\n                this.$message.error(res.data.msg || '操作失败');\r\n            }\r\n        },\r\n        async cancelThumbsupOrCrazily(type) {\r\n            if (!this.userId) {\r\n                this.$message.error('请先登录后操作');\r\n                return\r\n            }\r\n            let params = {\r\n                userid: this.userId,\r\n                refid: this.id,\r\n                tablename: this.tablename,\r\n                type: type\r\n            }\r\n            let resList = await this.$http.get('storeup/list', { params: params });\r\n            if (resList.data.code == 0 && resList.data.data.list.length > 0) {\r\n                let delId = resList.data.data.list[0].id;\r\n                let res = await this.$http.post('storeup/delete', [delId]);\r\n                if (res.data.code == 0) {\r\n                    if (type == 21) {\r\n                        this.detail.thumbsupnum = res.data.data;\r\n                        this.isThumbsupnum = false;\r\n                    } else {\r\n                        this.detail.crazilynum = res.data.data;\r\n                        this.isCrazilynum = false;\r\n                    }\r\n                    this.$message.success('取消成功!');\r\n                } else {\r\n                    this.$message.error(res.data.msg || '取消失败');\r\n                }\r\n            } else {\r\n                this.$message.error('未找到可取消的记录');\r\n            }\r\n        },\r\n        async getThumbsupOrCrazilyStatus() {\r\n            if (!this.userId) return;\r\n            let params = {\r\n                userid: this.userId,\r\n                refid: this.id,\r\n                tablename: this.tablename\r\n            }\r\n            let resThumbsup = await this.$http.get('storeup/list', { params: { ...params, type: 21 } });\r\n            if (resThumbsup.data.code == 0 && resThumbsup.data.data.list && resThumbsup.data.data.list.length > 0) {\r\n                this.isThumbsupnum = true;\r\n                this.thumbsupOrCrazilyInfo = resThumbsup.data.data.list[0];\r\n            } else {\r\n                this.isThumbsupnum = false;\r\n            }\r\n\r\n            let resCrazily = await this.$http.get('storeup/list', { params: { ...params, type: 22 } });\r\n            if (resCrazily.data.code == 0 && resCrazily.data.data.list && resCrazily.data.data.list.length > 0) {\r\n                this.isCrazilynum = true;\r\n                this.thumbsupOrCrazilyInfo = resCrazily.data.data.list[0];\r\n            } else {\r\n                this.isCrazilynum = false;\r\n            }\r\n        },\r\n        backClick() {\r\n            this.$router.go(-1);\r\n        },\r\n        download(file) {\r\n            window.location.href = this.baseUrl + file\r\n        },\r\n        btnAuth(tablename, key) {\r\n            if (!key) return true;\r\n            if (!this.$store.state.user || !this.$store.state.user.session || !this.$store.state.user.session.menuList) return false\r\n            return this.$store.state.user.session.menuList.filter(item => {\r\n                if (item.tablename == tablename && item.buttonname == key) {\r\n                    return true;\r\n                } else return false;\r\n            }).length > 0\r\n        },\r\n        editClick() {\r\n            this.$router.push('/index/' + this.tablename + '/add/' + this.id)\r\n        },\r\n        async delClick() {\r\n            this.$confirm('确定要删除吗?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(async () => {\r\n                let res = await this.$http.post(this.tablename + '/delete', [this.id]);\r\n                if (res.data.code == 0) {\r\n                    this.$message({\r\n                        message: '删除成功',\r\n                        type: 'success',\r\n                        duration: 500,\r\n                        onClose: () => {\r\n                            this.$router.go(-1);\r\n                        }\r\n                    });\r\n                } else {\r\n                    this.$message.error(res.data.msg || '删除失败');\r\n                }\r\n            });\r\n        },\r\n        async getDetail() {\r\n            let res = await this.$http.get('kechengxinxi/detail/' + this.id);\r\n            this.detail = res.data.data;\r\n            if (this.detail.contentpdfurl) {\r\n                this.contentpdfurl = this.detail.contentpdfurl;\r\n            }\r\n        },\r\n    }\r\n};\r\n</script>\r\n\r\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\r\n/* Your existing styles */\r\n</style>"]}]}